- hosts: all
  become: 'yes'
  vars:
    user:
    packages:
      - vim
      - wget
      - curl
      - htop
      - apache2
      - libapache2-mod-php
  tasks:
    - name: Change password for default user
      user:
        name:  "pi"
        password:  " secret | password_hash('sha512')"
        state: present
    - name: Ensure a list of packages installed
      apt:
        name:  "{{ packages }}"
        state: present
    - name: share file
      copy: 
        src: /var/www/html/index.html
        dest: /var/www/html/index.html
    - name: All done!
      debug:
        msg: Packages have been successfully installed

- hosts: web_hosts
  become: 'yes'
  tasks:
    - name: installation of DNS
      apt: 
      name: bind9
